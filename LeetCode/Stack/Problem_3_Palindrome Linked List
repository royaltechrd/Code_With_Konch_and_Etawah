# Definition for singly-linked list.
# class ListNode:
#     def __init__(self, val=0, next=None):
#         self.val = val
#         self.next = next
class Solution:
    def isPalindrome(self, head: Optional[ListNode]) -> bool:
        
        cur = head
        count = 0
        while cur:
            cur = cur.next
            count += 1
        
        loopcount = int(count/2)
        skip_elem = int(ceil(count/2))
                
        cur = head
        stack = []
        loop_count = 1
        while cur:
            #print(stack)
            if loop_count <= loopcount:
                stack.append(cur.val)        
            elif loop_count > skip_elem:               
                popped = stack.pop()
                if(popped != cur.val):
                    return False
            cur = cur.next
            loop_count += 1
        
        return True
